$(document).ready(function () {
    // Eye closed SVG path
    const eyeClosedPath = "M2.98975 9.45C4.05225 11.9122 6.88775 15.75 12 15.75C13.5128 15.75 14.8402 15.4122 15.9787 14.8434L18.9202 17.7847C17.3625 18.8344 15.3165 19.5 12.6667 19.5C6.75 19.5 2.25 14.25 0.75 10.875C1.12425 10.0059 1.66875 8.99531 2.47425 8.01562L6.08175 11.6231C6.0285 11.2434 6 10.8637 6 10.5C6 8.84314 7.34314 7.5 9 7.5C9.3365 7.5 9.7162 7.5285 10.0959 7.58175L13.7034 11.1892C13.8795 11.0681 14.2078 10.9219 14.8125 10.875C14.8473 10.875 14.8822 10.875 14.917 10.875C15.2535 11.025 15.5625 11.2284 15.8269 11.4937L21.1537 16.8207C21.3984 17.0654 21.3984 17.4616 21.1537 17.7063C20.909 17.951 20.5128 17.951 20.2681 17.7063L2.5435 0.018189C2.29887 -0.2265 2.29887 -0.6227 2.5435 -0.8674C2.78812 -1.1121 3.18433 -1.1121 3.42896 -0.8674L21.1537 16.8207";
    
    // Eye open SVG path (current path)
    const eyeOpenPath = "M15.0004 3.75C21.7405 3.75 27.348 8.5997 28.5236 15C27.348 21.4002 21.7405 26.25 15.0004 26.25C8.26015 26.25 2.65269 21.4002 1.47705 15C2.65269 8.5997 8.26015 3.75 15.0004 3.75ZM15.0004 23.75C20.2949 23.75 24.8254 20.065 25.9721 15C24.8254 9.93504 20.2949 6.25 15.0004 6.25C9.70575 6.25 5.17528 9.93504 4.02848 15C5.17528 20.065 9.70575 23.75 15.0004 23.75ZM15.0004 20.625C11.8937 20.625 9.37533 18.1066 9.37533 15C9.37533 11.8934 11.8937 9.375 15.0004 9.375C18.1069 9.375 20.6254 11.8934 20.6254 15C20.6254 18.1066 18.1069 20.625 15.0004 20.625ZM15.0004 18.125C16.7263 18.125 18.1254 16.7259 18.1254 15C18.1254 13.2741 16.7263 11.875 15.0004 11.875C13.2745 11.875 11.8753 13.2741 11.8753 15C11.8753 16.7259 13.2745 18.125 15.0004 18.125Z";

    // Function to toggle password visibility
    function togglePasswordVisibility(passwordFieldId, eyeIconId) {
        const passwordField = $('#' + passwordFieldId);
        const eyeIcon = $('#' + eyeIconId + ' path');
        
        if (passwordField.attr('type') === 'password') {
            passwordField.attr('type', 'text');
            // Change to eye-slash icon (eye closed)
            eyeIcon.attr('d', 'M21.8547 19.6375L16.8247 14.6075C17.9122 13.395 18.5622 11.7825 18.5622 10.025C18.5622 6.0225 15.2922 2.7525 11.2897 2.7525C9.53219 2.7525 7.91969 3.4025 6.70719 4.49L1.67719 -0.54C1.35219 -0.865 0.822194 -0.865 0.497194 -0.54C0.172194 -0.215 0.172194 0.315 0.497194 0.64L5.52719 5.67C2.29219 7.5275 0.422194 10.025 0.422194 10.025S3.69219 17.2975 11.2897 17.2975C13.0472 17.2975 14.6597 16.6475 15.8722 15.56L20.9022 20.59C21.0647 20.7525 21.2797 20.8337 21.4947 20.8337C21.7097 20.8337 21.9247 20.7525 22.0872 20.59C22.4122 20.265 22.4122 19.735 22.0872 19.41L21.8547 19.6375ZM11.2897 4.315C14.4297 4.315 16.9997 6.885 16.9997 10.025C16.9997 11.3825 16.5472 12.6175 15.7897 13.5925L13.8247 11.6275C14.2347 11.1225 14.4772 10.4725 14.4772 9.7625C14.4772 7.98 13.0722 6.575 11.2897 6.575C10.5797 6.575 9.92969 6.8175 9.42469 7.2275L7.45969 5.2625C8.43469 4.505 9.66969 4.0525 11.0272 4.0525L11.2897 4.315ZM3.20219 10.025C4.14719 8.6975 5.70719 6.8875 7.95719 5.8025L9.44219 7.2875C8.80219 7.8625 8.41469 8.7075 8.41469 9.6525C8.41469 11.435 9.81969 12.84 11.6022 12.84C12.5472 12.84 13.3922 12.4525 13.9672 11.8125L15.4522 13.2975C14.3672 14.5475 12.5572 16.1075 11.2297 16.1075C6.60719 16.1075 3.20219 10.025 3.20219 10.025Z');
            eyeIcon.attr('fill', '#878787');
        } else {
            passwordField.attr('type', 'password');
            // Change back to eye icon (eye open)
            eyeIcon.attr('d', eyeOpenPath);
            eyeIcon.attr('fill', '#878787');
        }
    }

    // Event listeners for password toggle
    $('#togglePassword').click(function() {
        togglePasswordVisibility('password', 'eyeIcon');
    });

    $('#togglePasswordConfirmation').click(function() {
        togglePasswordVisibility('password_confirmation', 'eyeIconConfirmation');
    });

    // Add hover effects for better UX
    $('#togglePassword, #togglePasswordConfirmation').hover(
        function() {
            $(this).find('path').attr('fill', '#555555');
        },
        function() {
            $(this).find('path').attr('fill', '#878787');
        }
    );
});